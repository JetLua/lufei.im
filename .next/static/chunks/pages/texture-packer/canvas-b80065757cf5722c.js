(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{9996:function(t){"use strict";var e=function(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===r}(t)}(t)};var r="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function a(t,e,r){return t.concat(e).map((function(t){return n(t,r)}))}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function i(t,e){try{return e in t}catch(r){return!1}}function u(t,e,r){var a={};return r.isMergeableObject(t)&&o(t).forEach((function(e){a[e]=n(t[e],r)})),o(e).forEach((function(o){(function(t,e){return i(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(i(t,o)&&r.isMergeableObject(e[o])?a[o]=function(t,e){if(!e.customMerge)return c;var r=e.customMerge(t);return"function"===typeof r?r:c}(o,r)(t[o],e[o],r):a[o]=n(e[o],r))})),a}function c(t,r,o){(o=o||{}).arrayMerge=o.arrayMerge||a,o.isMergeableObject=o.isMergeableObject||e,o.cloneUnlessOtherwiseSpecified=n;var i=Array.isArray(r);return i===Array.isArray(t)?i?o.arrayMerge(t,r,o):u(t,r,o):n(r,o)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return c(t,r,e)}),{})};var f=c;t.exports=f},1664:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/texture-packer/canvas",function(){return r(7255)}])},7255:function(t,e,r){"use strict";r.r(e);var n=r(8520),a=r.n(n),o=r(5893),i=r(668),u=r(828),c=r(2240),f=r.n(c),l=r(7294);function s(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,a)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){a=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.default=l.memo((function(t){var e=t.className,r=t.files,n=t.padding,c=t.cropped,h=t.extruded,p=d(t,["className","files","padding","cropped","extruded"]),m=y((0,u._Y)({gap:0}),2),b=(m[0],m[1],l.useRef()),w=l.useRef(),x=l.useRef({timestamp:0,packer:new i.cC(2048,2048)}).current;l.useEffect((function(){r.length&&Promise.all(Array.from(r,(function(t){return new Promise((e=a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).dataset.name=t.name,e.next=4,(0,u.pJ)(t);case 4:n.src=e.sent,n.onload=function(){return r(n)};case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(t){s(o,n,a,i,u,"next",t)}function u(t){s(o,n,a,i,u,"throw",t)}i(void 0)}))}));var e}))).then((function(t){x.ctx.clearRect(0,0,w.current.offsetWidth,w.current.offsetHeight),function(t,e){var r=void 0===e?0:e,n=x.packer,a=x.ctx;n.reset(),n.padding=r,n.addArray(t.map((function(t){return{sprite:t,width:t.width,height:t.height,x:0,y:0}})));var o=0,i=0,u=!0,c=!1,f=void 0;try{for(var l,s=n.rects[Symbol.iterator]();!(u=(l=s.next()).done);u=!0){var h=l.value;o=Math.max(h.x+h.width,o),i=Math.max(h.y+h.height,i)}}catch(b){c=!0,f=b}finally{try{u||null==s.return||s.return()}finally{if(c)throw f}}w.current.width=o,w.current.height=i,w.current.style.width="".concat(o,"px"),w.current.style.height="".concat(i,"px");var v=!0,d=!1,y=void 0;try{for(var g,p=n.rects[Symbol.iterator]();!(v=(g=p.next()).done);v=!0){var m=g.value;a.drawImage(m.sprite.canvas,m.x,m.y)}}catch(b){d=!0,y=b}finally{try{v||null==p.return||p.return()}finally{if(d)throw y}}}(t.map((function(t){return new g({img:t,cropped:c,extruded:h})})),n)}))}),[r,c,h,n]),(0,u.b6)((function(){return x.ctx=w.current.getContext("2d"),b.current.addEventListener("contextmenu",O),b.current.addEventListener("wheel",j),function(){b.current.removeEventListener("contextmenu",O),b.current.removeEventListener("wheel",j)}}));var O=function(t){t.preventDefault()},j=function(t){t.preventDefault(),t.stopPropagation(),console.log("ctrl",t.ctrlKey);var e=Date.now();if(x.elapsed=e-x.timestamp,!(x.elapsed>20)){x.timestamp=e-x.elapsed%20;var r=w.current,n=(r.offsetWidth,r.offsetHeight,0);t.ctrlKey&&(n-=.01*t.deltaY),console.log(n)}};return(0,o.jsx)("section",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){v(t,e,r[e])}))}return t}({},p,{ref:b,className:[f().root,e].join(" ").trim(),children:(0,o.jsx)("canvas",{ref:w})}))}));var g=function(){function t(e){var r=e.img,n=e.cropped,a=e.extruded;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=this.canvas=document.createElement("canvas");o.width=r.width,o.height=r.height,this.ctx=o.getContext("2d"),this.raw=r,this.name=r.dataset.name,n?this.crop():this.ctx.drawImage(r,0,0),a&&this.extrude(a)}var e,r,n;return e=t,(r=[{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}},{key:"extrude",value:function(t){var e=this,r=e.canvas,n=e.ctx,a=e.width,o=e.height,i=n.getImageData(0,0,a,o),u=n.getImageData(0,0,a,1),c=n.getImageData(0,0,1,o),f=n.getImageData(a-1,0,1,o),l=n.getImageData(0,o-1,a,1);r.width+=2*t,r.height+=2*t;for(var s=0;s<t;s++)n.putImageData(u,t,s);for(var h=0;h<t;h++)n.putImageData(c,h,t);for(var v=r.width-1;v>=r.width-t;v--)n.putImageData(f,v,t);for(var d=r.height-1;d>=r.height-t;d--)n.putImageData(l,t,d);n.putImageData(i,t,t)}},{key:"crop",value:function(){var t=this,e=t.ctx,r=t.width,n=t.height,a=t.raw,o=t.canvas;e.drawImage(a,0,0);var i=0;t:for(var u=0;u<r;u++)for(var c=e.getImageData(u,0,1,n).data,f=3;f<c.length;f+=4)if(c[f]){i=u;break t}var l=r;t:for(var s=r-1;s>-1;s--)for(var h=e.getImageData(s,0,1,n).data,v=3;v<h.length;v+=4)if(h[v]){l=s+1;break t}var d=0;t:for(var y=0;y<n;y++)for(var g=e.getImageData(0,y,r,1).data,p=3;p<g.length;p+=4)if(g[p]){d=y;break t}var m=n;t:for(var b=n-1;b>-1;b--)for(var w=e.getImageData(0,b,r,1).data,x=3;x<w.length;x+=4)if(w[x]){m=b+1;break t}var O=l-i,j=m-d;o.width=O,o.height=j,e.drawImage(this.raw,i,d,O,j,0,0,O,j)}}])&&h(e.prototype,r),n&&h(e,n),t}()},828:function(t,e,r){"use strict";function n(){var t,e;return[new Promise((function(r,n){t=n,e=r})),e,t]}r.d(e,{wv:function(){return n},pJ:function(){return s},b6:function(){return f},_Y:function(){return l}});var a=r(9996),o=r.n(a);function i(t,e,r){return null==e?t:o()(t,e,null!==r&&void 0!==r?r:{arrayMerge:function(t,e){return e}})}var u=r(7294);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(c){a=!0,o=c}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(t){var e=u.useRef();e.current=t,u.useEffect((function(){return e.current()}),[])}function l(t,e){return u.useReducer((function(t,r){return n=r,(null!=(a=Function)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](n):n instanceof a)?i(t,r(t),e):i(t,r,e);var n,a}),t)}function s(t){var e=c(n(),2),r=e[0],a=e[1],o=new FileReader;return o.readAsDataURL(t),o.onload=function(){return a(o.result)},r}},2240:function(t){t.exports={root:"style_root__Ysqjy"}}},function(t){t.O(0,[668,774,888,179],(function(){return e=1664,t(t.s=e);var e}));var e=t.O();_N_E=e}]);