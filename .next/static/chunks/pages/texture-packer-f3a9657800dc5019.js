(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{626:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/texture-packer",function(){return n(2794)}])},7255:function(e,t,n){"use strict";n.r(t);var r=n(8520),a=n.n(r),i=n(5893),o=n(668),u=n(828),c=n(2240),l=n.n(c),s=n(7294);function f(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(l){return void n(l)}u.done?t(c):Promise.resolve(c).then(r,a)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=s.memo((function(e){var t=e.className,n=e.files,r=e.padding,c=e.cropped,d=e.extruded,v=m(e,["className","files","padding","cropped","extruded"]),g=h((0,u._Y)({gap:0}),2),b=(g[0],g[1],s.useRef()),x=s.useRef(),w=s.useRef({timestamp:0,packer:new o.cC(2048,2048)}).current;s.useEffect((function(){n.length&&Promise.all(Array.from(n,(function(e){return new Promise((t=a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new Image).dataset.name=e.name,t.next=4,(0,u.pJ)(e);case 4:r.src=t.sent,r.onload=function(){return n(r)};case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){f(i,r,a,o,u,"next",e)}function u(e){f(i,r,a,o,u,"throw",e)}o(void 0)}))}));var t}))).then((function(e){w.ctx.clearRect(0,0,x.current.offsetWidth,x.current.offsetHeight),function(e,t){var n=void 0===t?0:t,r=w.packer,a=w.ctx;r.reset(),r.padding=n,r.addArray(e.map((function(e){return{sprite:e,width:e.width,height:e.height,x:0,y:0}})));var i=0,o=0,u=!0,c=!1,l=void 0;try{for(var s,f=r.rects[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var d=s.value;i=Math.max(d.x+d.width,i),o=Math.max(d.y+d.height,o)}}catch(b){c=!0,l=b}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}x.current.width=i,x.current.height=o,x.current.style.width="".concat(i,"px"),x.current.style.height="".concat(o,"px");var p=!0,m=!1,h=void 0;try{for(var y,v=r.rects[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var g=y.value;a.drawImage(g.sprite.canvas,g.x,g.y)}}catch(b){m=!0,h=b}finally{try{p||null==v.return||v.return()}finally{if(m)throw h}}}(e.map((function(e){return new y({img:e,cropped:c,extruded:d})})),r)}))}),[n,c,d,r]),(0,u.b6)((function(){return w.ctx=x.current.getContext("2d"),b.current.addEventListener("contextmenu",j),b.current.addEventListener("wheel",_),function(){b.current.removeEventListener("contextmenu",j),b.current.removeEventListener("wheel",_)}}));var j=function(e){e.preventDefault()},_=function(e){e.preventDefault(),e.stopPropagation(),console.log("ctrl",e.ctrlKey);var t=Date.now();if(w.elapsed=t-w.timestamp,!(w.elapsed>20)){w.timestamp=t-w.elapsed%20;var n=x.current,r=(n.offsetWidth,n.offsetHeight,0);e.ctrlKey&&(r-=.01*e.deltaY),console.log(r)}};return(0,i.jsx)("section",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},v,{ref:b,className:[l().root,t].join(" ").trim(),children:(0,i.jsx)("canvas",{ref:x})}))}));var y=function(){function e(t){var n=t.img,r=t.cropped,a=t.extruded;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=this.canvas=document.createElement("canvas");i.width=n.width,i.height=n.height,this.ctx=i.getContext("2d"),this.raw=n,this.name=n.dataset.name,r?this.crop():this.ctx.drawImage(n,0,0),a&&this.extrude(a)}var t,n,r;return t=e,(n=[{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}},{key:"extrude",value:function(e){var t=this,n=t.canvas,r=t.ctx,a=t.width,i=t.height,o=r.getImageData(0,0,a,i),u=r.getImageData(0,0,a,1),c=r.getImageData(0,0,1,i),l=r.getImageData(a-1,0,1,i),s=r.getImageData(0,i-1,a,1);n.width+=2*e,n.height+=2*e;for(var f=0;f<e;f++)r.putImageData(u,e,f);for(var d=0;d<e;d++)r.putImageData(c,d,e);for(var p=n.width-1;p>=n.width-e;p--)r.putImageData(l,p,e);for(var m=n.height-1;m>=n.height-e;m--)r.putImageData(s,e,m);r.putImageData(o,e,e)}},{key:"crop",value:function(){var e=this,t=e.ctx,n=e.width,r=e.height,a=e.raw,i=e.canvas;t.drawImage(a,0,0);var o=0;e:for(var u=0;u<n;u++)for(var c=t.getImageData(u,0,1,r).data,l=3;l<c.length;l+=4)if(c[l]){o=u;break e}var s=n;e:for(var f=n-1;f>-1;f--)for(var d=t.getImageData(f,0,1,r).data,p=3;p<d.length;p+=4)if(d[p]){s=f+1;break e}var m=0;e:for(var h=0;h<r;h++)for(var y=t.getImageData(0,h,n,1).data,v=3;v<y.length;v+=4)if(y[v]){m=h;break e}var g=r;e:for(var b=r-1;b>-1;b--)for(var x=t.getImageData(0,b,n,1).data,w=3;w<x.length;w+=4)if(x[w]){g=b+1;break e}var j=s-o,_=g-m;i.width=j,i.height=_,t.drawImage(this.raw,o,m,j,_,0,0,j,_)}}])&&d(t.prototype,n),r&&d(t,r),e}()},5357:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(8016),i=n(9748),o=n(564),u=n.n(o),c=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.default=c.memo((function(e){var t=e.className,n=e.cropped,o=e.onCrop,c=e.onExtrude,f=e.onPad,d=e.padding,p=e.extruded,m=s(e,["className","cropped","onCrop","onExtrude","onPad","padding","extruded"]);return(0,r.jsxs)("section",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},m,{className:[u().root,t].join(" ").trim(),children:[(0,r.jsx)("i",{className:u().label,children:"\u6587\u4ef6\u540d(File name)"}),(0,r.jsx)(a.Z,{className:u().input,type:"text"}),(0,r.jsx)("i",{className:u().label,children:"\u524d\u7f00(Prefix)"}),(0,r.jsx)(a.Z,{className:u().input,type:"text"}),(0,r.jsx)("i",{className:u().label,children:"\u6324\u538b(Extrude)"}),(0,r.jsx)(a.Z,{className:u().input,type:"number",inputProps:{min:0,step:1},onChange:function(e){return c(+e.target.value)},defaultValue:p}),(0,r.jsx)("i",{className:u().label,children:"\u8fb9\u8ddd(Padding)"}),(0,r.jsx)(a.Z,{className:u().input,type:"number",inputProps:{min:0,step:1},defaultValue:d,onChange:function(e){return f(+e.target.value)}}),(0,r.jsx)("i",{className:u().label,children:"\u88c1\u526a(Crop)"}),(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{sx:{margin:0,padding:0},checked:n,onChange:function(e,t){return o(t)}})})]}))}))},1810:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(3321),i=n(8462),o=n(1700),u=n(8619),c=n(7275),l=n(7091),s=n(828),f=n(6609),d=n.n(f),p=n(7294);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=p.memo((function(e){var t=e.className,n=e.onFiles,f=y(e,["className","onFiles"]),m=v((0,s._Y)({buttons:[{name:"\u6dfb\u52a0\u56fe\u7247",id:"btn:add:image"},{name:"\u6dfb\u52a0\u6587\u4ef6\u5939",id:"btn:add:folder"},{name:"\u6e05\u9664",id:"btn:clear"}],files:[]}),2),x=m[0],w=m[1];p.useEffect((function(){n(x.files)}),[x.files]);var j=function(e){switch(e.currentTarget.dataset.name){case"btn:add:image":_().then(O).then((function(e){e.length&&w({files:g(x.files).concat(g(e))})}))}},_=function(){var e=v((0,s.wv)(),2),t=e[0],n=e[1],r=document.createElement("input");return r.type="file",r.multiple=!0,r.accept="image/*",r.click(),r.onchange=function(){for(var e=[],t=0;t<r.files.length;t++)e.push(r.files.item(t));n(e)},t},O=function(e){return e.filter((function(e){return!x.files.find((function(t){return t.type===e.type&&t.lastModified===e.lastModified}))}))};return(0,r.jsxs)("section",h({},f,{className:[d().root,t].join(" ").trim(),children:[(0,r.jsx)("section",{className:d().head,children:x.buttons.map((function(e,t){return(0,r.jsx)(a.Z,{variant:"contained",size:"small",onClick:j,"data-name":e.id,children:e.name},t)}))}),x.files.length<1&&(0,r.jsxs)("section",{className:d().tip,onClick:j,"data-name":"btn:add:image",children:[(0,r.jsx)(l.Z,{color:"action",fontSize:"large"}),(0,r.jsx)("i",{className:d().text,children:"\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"})]}),(0,r.jsx)(i.Z,{className:d().list,children:x.files.map((function(e,t){return(0,r.jsx)(o.ZP,{className:d().item,disablePadding:!0,children:(0,r.jsxs)(u.Z,{className:d().button,disableGutters:!0,children:[(0,r.jsx)(b,{className:d().icon,file:e}),(0,r.jsx)(c.Z,{primary:e.name,className:d().name,disableTypography:!0})]})},t)}))})]}))}));var b=p.memo((function(e){var t=e.style,n=e.file,a=y(e,["style","file"]),i=v((0,s._Y)({url:""}),2),o=i[0],u=i[1];return p.useEffect((function(){URL.revokeObjectURL(o.url),u({url:URL.createObjectURL(n)})}),[n]),(0,r.jsx)("i",h({},a,{style:h({},t,{backgroundImage:"url(".concat(o.url,")")})}))}))},2794:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(5357),i=n(7255),o=n(1810),u=n(828),c=n(5524),l=n.n(c),s=n(7294);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=s.memo((function(){var e=f((0,u._Y)({padding:0,extruded:0,cropped:!1,files:[]}),2),t=e[0],n=e[1];return(0,r.jsxs)("section",{className:l().root,children:[(0,r.jsx)(o.default,{onFiles:function(e){return n({files:e})}}),(0,r.jsx)(i.default,{files:t.files,padding:t.padding,cropped:t.cropped,extruded:t.extruded}),(0,r.jsx)(a.default,{cropped:t.cropped,onCrop:function(e){return n({cropped:e})},onExtrude:function(e){return n({extruded:e})},onPad:function(e){return n({padding:e})},padding:t.padding,extruded:t.extruded})]})}))},828:function(e,t,n){"use strict";function r(){var e,t;return[new Promise((function(n,r){e=r,t=n})),t,e]}n.d(t,{wv:function(){return r},pJ:function(){return f},b6:function(){return l},_Y:function(){return s}});var a=n(9996),i=n.n(a);function o(e,t,n){return null==t?e:i()(e,t,null!==n&&void 0!==n?n:{arrayMerge:function(e,t){return t}})}var u=n(7294);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e){var t=u.useRef();t.current=e,u.useEffect((function(){return t.current()}),[])}function s(e,t){return u.useReducer((function(e,n){return r=n,(null!=(a=Function)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](r):r instanceof a)?o(e,n(e),t):o(e,n,t);var r,a}),e)}function f(e){var t=c(r(),2),n=t[0],a=t[1],i=new FileReader;return i.readAsDataURL(e),i.onload=function(){return a(i.result)},n}},2240:function(e){e.exports={root:"style_root__Ysqjy"}},564:function(e){e.exports={root:"style_root__CIopf",label:"style_label__QdX_M",input:"style_input__J7_6y"}},6609:function(e){e.exports={root:"style_root__fhTWa",head:"style_head__4DB8I",tip:"style_tip__AFS4i",text:"style_text__cKaP3",list:"style_list__mY0vc",item:"style_item__eICeK",button:"style_button__pv0WL",name:"style_name__3R0sB",icon:"style_icon__xSR5H"}},5524:function(e){e.exports={root:"style_root__O5wal",receiver:"style_receiver__XP_Oc"}}},function(e){e.O(0,[235,838,250,668,774,888,179],(function(){return t=626,e(e.s=t);var t}));var t=e.O();_N_E=t}]);